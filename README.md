## Simple time-series model

A Python implementation of the time-series model for the task outlined in `Task.pdf`. See the following sections for installation and usage.

First, the multi-variate time-series data is loaded and preprocessed. A simple imputing, constant feature filtering, and data scaling is used. The data is split into a "training" part (head of the series) and a "testing" part (tail of the series).

A model is then created using the training part. First, values for some parameters are picked using cross-validation scores (this is just a placeholder for a parameter search). Then, a model is fitted on the full training data. The fitted model is then used to forecast for the testing period. Forecasted values are compared to the actual test values. I chose mean average percentage error for the evaluation, as percentage errors are more intuitive than some squared/absolute values.

There are two modelling approaches I played with - VAR and LGBM. I wanted to try some ARIMA variant, but it was usually pretty slow to fit.
- VAR (vector autoregression) is a simple statistical model. In the script, it forecasts a combined vector of all quantities, based on their past values. I used VAR from the `sktime` library.
- LGBM is a gradient boosting model from the `lightgbm` library. I used its regression version adapted for forecasting using a rolling window approach. I made it to forecast a single quantity based on both its past values, and values of other (exogenous) quantities. 

VAR model is less precise, but can be used to forecast for periods where we don't have measurements for any of the quantities at all. LGBM is more precise and suitable when we forecast some quantity for periods where we can utilize measurements of other exogenous quantities.

Below is an example of the consumption forecast generated by the LGBM model:

<img src="consumption-forecast.png" alt="Consumption Forecast" width="600" />

### Installation

All Python requirements should be specified in `requirements.txt` file.
After you set up and activate a [virtual environment](https://docs.python.org/3/library/venv.html), just install the requirements with:

```
pip install -r requirements.txt
```

I tested everything on Windows and Ubuntu, so hopefully there are no conflicts.

### Usage

Use `time_series.py` to run the whole process. The usage is following: 
```
time_series.py [-h] -i INPUT -q QUANTITY [-o OUTPUT] [-v] [-m {VAR,LGBM}]
```

Input is the data CSV file, quantity the variable to model.
If the output path is given, plot is exported as PNG. Otherwise, it is only opened in a console. Verbosity and model can be selected (LGBM with no progress prints is set as default). The evaluation metric details are printed at the end. Use `python time_series.py -h` for further details.

You can run the whole program with the example data as:
```
python time_series.py -i data.csv -q "Consumption" -o "consumption-forecast.png"
```

Additionaly, some initial data exploration and visualization is provided in Jupyter notebook `explore.ipynb`.


### Tests

Very simple prototype test suite are provided in `unit_test.py`. Run them with:
```
python -m unittest unit_test.py -v
```